#!/bin/bash

current_branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$current_branch" == "test" ]; then
    # このブランチから派生した変更があるか確認
    git diff --name-only origin/test...HEAD | grep -qE '^'
    if [ $? -eq 0 ]; then
        echo "testブランチからのコミットは許可されません。" >&2
        exit 1
    fi
fi

exit 0